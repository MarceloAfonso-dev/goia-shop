{"ast":null,"code":"import axios from'axios';// Configuração base da API\nconst api=axios.create({baseURL:'http://localhost:8080/api',timeout:10000});// Interceptor para adicionar token em todas as requisições\napi.interceptors.request.use(config=>{const token=localStorage.getItem('token');if(token){config.headers.Authorization=\"Bearer \".concat(token);}return config;},error=>{return Promise.reject(error);});// Interceptor para tratar respostas de erro\napi.interceptors.response.use(response=>{return response;},error=>{var _error$response;if(((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.status)===401){// Token expirado ou inválido\nlocalStorage.removeItem('token');localStorage.removeItem('user');// Redirecionar para login se não estiver na tela de login\nif(window.location.pathname!=='/'){window.location.reload();}}return Promise.reject(error);});// Para ativar produto\nexport async function activateProduct(id){const response=await api.patch(\"/produtos/\".concat(id,\"/ativar\"));return response.data;}// Para inativar produto\nexport async function deactivateProduct(id){const response=await api.patch(\"/produtos/\".concat(id,\"/inativar\"));return response.data;}export default api;","map":{"version":3,"names":["axios","api","create","baseURL","timeout","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","concat","error","Promise","reject","response","_error$response","status","removeItem","window","location","pathname","reload","activateProduct","id","patch","data","deactivateProduct"],"sources":["D:/PI4/goia-shop/frontend/src/utils/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\n// Configuração base da API\r\nconst api = axios.create({\r\n    baseURL: 'http://localhost:8080/api',\r\n    timeout: 10000\r\n});\r\n\r\n// Interceptor para adicionar token em todas as requisições\r\napi.interceptors.request.use(\r\n    (config) => {\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n            config.headers.Authorization = `Bearer ${token}`;\r\n        }\r\n        return config;\r\n    },\r\n    (error) => {\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// Interceptor para tratar respostas de erro\r\napi.interceptors.response.use(\r\n    (response) => {\r\n        return response;\r\n    },\r\n    (error) => {\r\n        if (error.response?.status === 401) {\r\n            // Token expirado ou inválido\r\n            localStorage.removeItem('token');\r\n            localStorage.removeItem('user');\r\n            \r\n            // Redirecionar para login se não estiver na tela de login\r\n            if (window.location.pathname !== '/') {\r\n                window.location.reload();\r\n            }\r\n        }\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// Para ativar produto\r\nexport async function activateProduct(id) {\r\n  const response = await api.patch(`/produtos/${id}/ativar`);\r\n  return response.data;\r\n}\r\n\r\n// Para inativar produto\r\nexport async function deactivateProduct(id) {\r\n  const response = await api.patch(`/produtos/${id}/inativar`);\r\n  return response.data;\r\n}\r\n\r\nexport default api;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CAEzB;AACA,KAAM,CAAAC,GAAG,CAAGD,KAAK,CAACE,MAAM,CAAC,CACrBC,OAAO,CAAE,2BAA2B,CACpCC,OAAO,CAAE,KACb,CAAC,CAAC,CAEF;AACAH,GAAG,CAACI,YAAY,CAACC,OAAO,CAACC,GAAG,CACvBC,MAAM,EAAK,CACR,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAC3C,GAAIF,KAAK,CAAE,CACPD,MAAM,CAACI,OAAO,CAACC,aAAa,WAAAC,MAAA,CAAaL,KAAK,CAAE,CACpD,CACA,MAAO,CAAAD,MAAM,CACjB,CAAC,CACAO,KAAK,EAAK,CACP,MAAO,CAAAC,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAChC,CACJ,CAAC,CAED;AACAd,GAAG,CAACI,YAAY,CAACa,QAAQ,CAACX,GAAG,CACxBW,QAAQ,EAAK,CACV,MAAO,CAAAA,QAAQ,CACnB,CAAC,CACAH,KAAK,EAAK,KAAAI,eAAA,CACP,GAAI,EAAAA,eAAA,CAAAJ,KAAK,CAACG,QAAQ,UAAAC,eAAA,iBAAdA,eAAA,CAAgBC,MAAM,IAAK,GAAG,CAAE,CAChC;AACAV,YAAY,CAACW,UAAU,CAAC,OAAO,CAAC,CAChCX,YAAY,CAACW,UAAU,CAAC,MAAM,CAAC,CAE/B;AACA,GAAIC,MAAM,CAACC,QAAQ,CAACC,QAAQ,GAAK,GAAG,CAAE,CAClCF,MAAM,CAACC,QAAQ,CAACE,MAAM,CAAC,CAAC,CAC5B,CACJ,CACA,MAAO,CAAAT,OAAO,CAACC,MAAM,CAACF,KAAK,CAAC,CAChC,CACJ,CAAC,CAED;AACA,MAAO,eAAe,CAAAW,eAAeA,CAACC,EAAE,CAAE,CACxC,KAAM,CAAAT,QAAQ,CAAG,KAAM,CAAAjB,GAAG,CAAC2B,KAAK,cAAAd,MAAA,CAAca,EAAE,WAAS,CAAC,CAC1D,MAAO,CAAAT,QAAQ,CAACW,IAAI,CACtB,CAEA;AACA,MAAO,eAAe,CAAAC,iBAAiBA,CAACH,EAAE,CAAE,CAC1C,KAAM,CAAAT,QAAQ,CAAG,KAAM,CAAAjB,GAAG,CAAC2B,KAAK,cAAAd,MAAA,CAAca,EAAE,aAAW,CAAC,CAC5D,MAAO,CAAAT,QAAQ,CAACW,IAAI,CACtB,CAEA,cAAe,CAAA5B,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}