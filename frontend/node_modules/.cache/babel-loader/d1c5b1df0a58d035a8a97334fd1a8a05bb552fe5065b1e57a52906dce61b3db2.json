{"ast":null,"code":"import React,{useState}from'react';import{Modal,Button,Form,Alert,Spinner}from'react-bootstrap';import api from'../utils/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductQuantidadeModal=_ref=>{let{show,onHide,product,onSuccess}=_ref;const[quantidade,setQuantidade]=useState(0);const[loading,setLoading]=useState(false);const[error,setError]=useState('');// Atualizar quantidade quando o produto mudar\nReact.useEffect(()=>{if(product){setQuantidade(product.quantidadeEstoque||0);setError('');}},[product]);const handleSubmit=async e=>{e.preventDefault();if(quantidade<=0){setError('A quantidade deve ser maior que zero. Para zerar o estoque, use a opção de inativar o produto.');return;}try{setLoading(true);setError('');await api.put(\"/produtos/\".concat(product.id,\"/quantidade\"),{quantidadeEstoque:quantidade});onSuccess();onHide();}catch(err){var _err$response;if((_err$response=err.response)!==null&&_err$response!==void 0&&_err$response.data){setError(err.response.data);}else{setError('Erro ao alterar quantidade do produto');}}finally{setLoading(false);}};const handleClose=()=>{setError('');setQuantidade((product===null||product===void 0?void 0:product.quantidadeEstoque)||0);onHide();};if(!product)return null;return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:handleClose,centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Alterar Quantidade em Estoque\"})}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"h6\",{children:[\"Produto: \",/*#__PURE__*/_jsx(\"strong\",{children:product.nome})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-muted mb-0\",children:[\"ID: \",product.id]})]}),error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",className:\"mb-3\",children:error}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Nova Quantidade em Estoque\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",min:\"1\",value:quantidade,onChange:e=>setQuantidade(parseInt(e.target.value)||1),placeholder:\"Digite a nova quantidade (m\\xEDnimo 1)\",required:true}),/*#__PURE__*/_jsxs(Form.Text,{className:\"text-muted\",children:[\"Quantidade atual: \",/*#__PURE__*/_jsx(\"strong\",{children:product.quantidadeEstoque}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{className:\"text-warning\",children:\"\\u26A0\\uFE0F Quantidade m\\xEDnima: 1 unidade\"})]})]})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:handleClose,disabled:loading,children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",disabled:loading,children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spinner,{animation:\"border\",size:\"sm\",className:\"me-2\"}),\"Salvando...\"]}):'Salvar Alteração'})]})]})]});};export default ProductQuantidadeModal;","map":{"version":3,"names":["React","useState","Modal","Button","Form","Alert","Spinner","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductQuantidadeModal","_ref","show","onHide","product","onSuccess","quantidade","setQuantidade","loading","setLoading","error","setError","useEffect","quantidadeEstoque","handleSubmit","e","preventDefault","put","concat","id","err","_err$response","response","data","handleClose","centered","children","Header","closeButton","Title","onSubmit","Body","className","nome","variant","Group","Label","Control","type","min","value","onChange","parseInt","target","placeholder","required","Text","Footer","onClick","disabled","animation","size"],"sources":["D:/PI4/goia-shop/frontend/src/components/ProductQuantidadeModal.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Modal, Button, Form, Alert, Spinner } from 'react-bootstrap';\r\nimport api from '../utils/api';\r\n\r\nconst ProductQuantidadeModal = ({ show, onHide, product, onSuccess }) => {\r\n    const [quantidade, setQuantidade] = useState(0);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    // Atualizar quantidade quando o produto mudar\r\n    React.useEffect(() => {\r\n        if (product) {\r\n            setQuantidade(product.quantidadeEstoque || 0);\r\n            setError('');\r\n        }\r\n    }, [product]);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        \r\n        if (quantidade <= 0) {\r\n            setError('A quantidade deve ser maior que zero. Para zerar o estoque, use a opção de inativar o produto.');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setLoading(true);\r\n            setError('');\r\n            \r\n            await api.put(`/produtos/${product.id}/quantidade`, {\r\n                quantidadeEstoque: quantidade\r\n            });\r\n            \r\n            onSuccess();\r\n            onHide();\r\n            \r\n        } catch (err) {\r\n            if (err.response?.data) {\r\n                setError(err.response.data);\r\n            } else {\r\n                setError('Erro ao alterar quantidade do produto');\r\n            }\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleClose = () => {\r\n        setError('');\r\n        setQuantidade(product?.quantidadeEstoque || 0);\r\n        onHide();\r\n    };\r\n\r\n    if (!product) return null;\r\n\r\n    return (\r\n        <Modal show={show} onHide={handleClose} centered>\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>Alterar Quantidade em Estoque</Modal.Title>\r\n            </Modal.Header>\r\n            <Form onSubmit={handleSubmit}>\r\n                <Modal.Body>\r\n                    <div className=\"mb-3\">\r\n                        <h6>Produto: <strong>{product.nome}</strong></h6>\r\n                        <p className=\"text-muted mb-0\">ID: {product.id}</p>\r\n                    </div>\r\n                    \r\n                    {error && (\r\n                        <Alert variant=\"danger\" className=\"mb-3\">\r\n                            {error}\r\n                        </Alert>\r\n                    )}\r\n                    \r\n                    <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Nova Quantidade em Estoque</Form.Label>\r\n                        <Form.Control\r\n                            type=\"number\"\r\n                            min=\"1\"\r\n                            value={quantidade}\r\n                            onChange={(e) => setQuantidade(parseInt(e.target.value) || 1)}\r\n                            placeholder=\"Digite a nova quantidade (mínimo 1)\"\r\n                            required\r\n                        />\r\n                        <Form.Text className=\"text-muted\">\r\n                            Quantidade atual: <strong>{product.quantidadeEstoque}</strong><br/>\r\n                            <small className=\"text-warning\">⚠️ Quantidade mínima: 1 unidade</small>\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={handleClose} disabled={loading}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button variant=\"primary\" type=\"submit\" disabled={loading}>\r\n                        {loading ? (\r\n                            <>\r\n                                <Spinner animation=\"border\" size=\"sm\" className=\"me-2\" />\r\n                                Salvando...\r\n                            </>\r\n                        ) : (\r\n                            'Salvar Alteração'\r\n                        )}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Form>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default ProductQuantidadeModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}