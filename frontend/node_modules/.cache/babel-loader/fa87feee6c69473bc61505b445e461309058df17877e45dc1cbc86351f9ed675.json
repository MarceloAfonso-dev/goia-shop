{"ast":null,"code":"import _objectSpread from\"D:/PI4/goia-shop/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Modal,Form,Button,Alert,Row,Col,Spinner,Card,Badge,Image}from'react-bootstrap';import api from'../utils/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const ProductEditModal=_ref=>{let{show,onHide,product,onProductUpdated}=_ref;const[formData,setFormData]=useState({nome:'',descricao:'',preco:'',quantidadeEstoque:'',avaliacao:'',status:''});const[imagens,setImagens]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[uploadingImages,setUploadingImages]=useState(false);const[newImages,setNewImages]=useState([]);useEffect(()=>{if(product){setFormData({nome:product.nome||'',descricao:product.descricao||'',preco:product.preco||'',quantidadeEstoque:product.quantidadeEstoque||'',avaliacao:product.avaliacao||'',status:product.status||'ATIVO'});// Carregar imagens do produto\nif(product.imagens&&product.imagens.length>0){setImagens(product.imagens);}else{setImagens([]);}}},[product]);const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));setError('');};const handleImageUpload=e=>{const files=Array.from(e.target.files);if(files.length>0){setNewImages(files);}};const handleMoveImage=(fromIndex,toIndex)=>{const items=Array.from(imagens);const[reorderedItem]=items.splice(fromIndex,1);items.splice(toIndex,0,reorderedItem);// Atualizar ordem das imagens\nconst updatedImages=items.map((img,index)=>_objectSpread(_objectSpread({},img),{},{ordem:index}));setImagens(updatedImages);};const handleMoveToFirst=imagemId=>{const mainImage=imagens.find(img=>img.id===imagemId);if(!mainImage)return;// Mover para primeira posição e definir como principal\nconst otherImages=imagens.filter(img=>img.id!==imagemId);const updatedImages=[_objectSpread(_objectSpread({},mainImage),{},{isPrincipal:true,ordem:0}),...otherImages.map((img,index)=>_objectSpread(_objectSpread({},img),{},{isPrincipal:false,ordem:index+1}))];setImagens(updatedImages);};const handleSetMainImage=imagemId=>{// Encontrar a imagem que será definida como principal\nconst mainImage=imagens.find(img=>img.id===imagemId);if(!mainImage)return;// Reordenar: imagem principal vai para primeira posição\nconst otherImages=imagens.filter(img=>img.id!==imagemId);const updatedImages=[_objectSpread(_objectSpread({},mainImage),{},{isPrincipal:true,ordem:0}),...otherImages.map((img,index)=>_objectSpread(_objectSpread({},img),{},{isPrincipal:false,ordem:index+1}))];setImagens(updatedImages);};const handleRemoveImage=async imagemId=>{if(!window.confirm('Tem certeza que deseja remover esta imagem?')){return;}try{await api.delete(\"/produtos/\".concat(product.id,\"/imagens/\").concat(imagemId));// Remover da lista local\nconst updatedImages=imagens.filter(img=>img.id!==imagemId);// Se era a imagem principal, definir a primeira como principal e reordenar\nif(updatedImages.length>0&&!updatedImages.some(img=>img.isPrincipal)){const reorderedImages=updatedImages.map((img,index)=>_objectSpread(_objectSpread({},img),{},{isPrincipal:index===0,ordem:index}));setImagens(reorderedImages);}else{// Reordenar as imagens restantes\nconst reorderedImages=updatedImages.map((img,index)=>_objectSpread(_objectSpread({},img),{},{ordem:index}));setImagens(reorderedImages);}}catch(err){var _err$response;setError('Erro ao remover imagem: '+(((_err$response=err.response)===null||_err$response===void 0?void 0:_err$response.data)||err.message));}};const handleSubmit=async e=>{e.preventDefault();setLoading(true);setError('');try{// Validações (melhoradas do modal básico)\nif(!formData.nome.trim()){throw new Error('Nome do produto é obrigatório');}if(!formData.preco||parseFloat(formData.preco)<=0){throw new Error('Preço deve ser maior que zero');}if(!formData.quantidadeEstoque||parseInt(formData.quantidadeEstoque)<=0){throw new Error('Quantidade em estoque deve ser maior que zero. Para zerar o estoque, use a opção de inativar o produto.');}if(formData.avaliacao&&(parseFloat(formData.avaliacao)<1||parseFloat(formData.avaliacao)>5)){throw new Error('Avaliação deve estar entre 1 e 5');}// Preparar dados do produto\nconst productData={nome:formData.nome.trim(),descricao:formData.descricao.trim(),preco:parseFloat(formData.preco),quantidadeEstoque:parseInt(formData.quantidadeEstoque),avaliacao:formData.avaliacao?parseFloat(formData.avaliacao):null,status:formData.status,imagens:imagens.map((img,index)=>({imagemId:img.id,ordem:index,isPrincipal:img.isPrincipal}))};// Upload de novas imagens primeiro\nif(newImages.length>0){setUploadingImages(true);const formData=new FormData();newImages.forEach(file=>{formData.append('arquivos',file);});await api.post(\"/produtos/\".concat(product.id,\"/imagens\"),formData,{headers:{'Content-Type':'multipart/form-data'}});setUploadingImages(false);}// Atualizar produto\nawait api.put(\"/produtos/\".concat(product.id,\"/completo\"),productData);onProductUpdated();onHide();}catch(err){var _err$response2;setError(((_err$response2=err.response)===null||_err$response2===void 0?void 0:_err$response2.data)||err.message||'Erro ao atualizar produto');setUploadingImages(false);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(Modal,{show:show,onHide:onHide,size:\"xl\",centered:true,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"\\u270F\\uFE0F Editar Produto\"})}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Modal.Body,{children:[error&&/*#__PURE__*/_jsx(Alert,{variant:\"danger\",children:error}),/*#__PURE__*/_jsxs(Alert,{variant:\"info\",className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCDD Neste modal voc\\xEA pode editar:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"mb-0 mt-2\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Dados b\\xE1sicos:\"}),\" Nome, descri\\xE7\\xE3o, pre\\xE7o, quantidade, avalia\\xE7\\xE3o e status\"]}),/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Imagens:\"}),\" Adicionar novas, remover existentes, definir principal e reordenar\"]})]})]}),/*#__PURE__*/_jsx(\"h5\",{children:\"\\uD83D\\uDCCB Dados B\\xE1sicos\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Nome do Produto *\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"nome\",value:formData.nome,onChange:handleInputChange,required:true,placeholder:\"Nome do produto\"})]})}),/*#__PURE__*/_jsx(Col,{md:6,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Pre\\xE7o *\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",step:\"0.01\",name:\"preco\",value:formData.preco,onChange:handleInputChange,required:true,placeholder:\"0.00\"})]})})]}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Descri\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(Form.Control,{as:\"textarea\",rows:3,name:\"descricao\",value:formData.descricao,onChange:handleInputChange,placeholder:\"Descri\\xE7\\xE3o do produto\"})]}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Quantidade em Estoque *\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",name:\"quantidadeEstoque\",value:formData.quantidadeEstoque,onChange:handleInputChange,required:true,min:\"1\",placeholder:\"1\"})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Avalia\\xE7\\xE3o\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"number\",step:\"0.1\",min:\"1\",max:\"5\",name:\"avaliacao\",value:formData.avaliacao,onChange:handleInputChange,placeholder:\"1.0 - 5.0\"}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"Opcional - de 1 a 5\"})]})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-3\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Status\"}),/*#__PURE__*/_jsxs(Form.Select,{name:\"status\",value:formData.status,onChange:handleInputChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"ATIVO\",children:\"Ativo\"}),/*#__PURE__*/_jsx(\"option\",{value:\"INATIVO\",children:\"Inativo\"})]})]})})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-4\"}),/*#__PURE__*/_jsx(\"h5\",{children:\"\\uD83D\\uDDBC\\uFE0F Gerenciamento de Imagens\"}),/*#__PURE__*/_jsxs(Form.Group,{className:\"mb-4\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\uD83D\\uDCE4 Adicionar Novas Imagens\"}),/*#__PURE__*/_jsx(Form.Control,{type:\"file\",multiple:true,accept:\"image/jpeg,image/png,image/gif,image/webp\",onChange:handleImageUpload}),/*#__PURE__*/_jsx(Form.Text,{className:\"text-muted\",children:\"Selecione uma ou mais imagens. Formatos aceitos: JPEG, PNG, GIF, WebP (m\\xE1x. 5MB cada)\"})]}),imagens.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"h6\",{children:\"\\uD83D\\uDCF8 Imagens do Produto\"}),/*#__PURE__*/_jsxs(Alert,{variant:\"info\",className:\"small mb-3\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCA1 Como usar:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"mb-0 mt-1\",children:[/*#__PURE__*/_jsxs(\"li\",{children:[\"Clique em \",/*#__PURE__*/_jsx(\"strong\",{children:\"\\\"\\u2B50 Definir como Principal\\\"\"}),\" para escolher a imagem de destaque\"]}),/*#__PURE__*/_jsx(\"li\",{children:\"Use \\u2191\\u2193 para reordenar as imagens\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Clique no \\u274C para remover uma imagem\"})]})]}),/*#__PURE__*/_jsx(Row,{className:\"g-3\",children:imagens.map((imagem,index)=>/*#__PURE__*/_jsx(Col,{md:4,lg:3,children:/*#__PURE__*/_jsxs(Card,{className:\"h-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(Image,{src:imagem.urlArquivo,alt:imagem.nomeArquivo,style:{width:'100%',height:'200px',objectFit:'cover'}}),imagem.isPrincipal&&/*#__PURE__*/_jsx(Badge,{bg:\"success\",className:\"position-absolute top-0 start-0 m-2\",style:{fontSize:'0.8rem'},children:\"\\u2B50 PRINCIPAL\"}),/*#__PURE__*/_jsx(Button,{variant:\"danger\",size:\"sm\",className:\"position-absolute top-0 end-0 m-2\",onClick:()=>handleRemoveImage(imagem.id),style:{width:'30px',height:'30px',padding:'0'},title:\"Remover imagem\",children:\"\\u274C\"})]}),/*#__PURE__*/_jsxs(Card.Body,{className:\"p-2\",children:[/*#__PURE__*/_jsx(\"small\",{className:\"text-muted d-block mb-2\",title:imagem.nomeArquivo,children:imagem.nomeArquivo.length>20?imagem.nomeArquivo.substring(0,20)+'...':imagem.nomeArquivo}),!imagem.isPrincipal?/*#__PURE__*/_jsx(Button,{variant:\"outline-warning\",size:\"sm\",className:\"w-100 mb-2\",onClick:()=>handleSetMainImage(imagem.id),children:\"\\u2B50 Definir como Principal\"}):/*#__PURE__*/_jsx(Button,{variant:\"success\",size:\"sm\",className:\"w-100 mb-2\",disabled:true,children:\"\\u2705 Imagem Principal\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-1 justify-content-center\",children:[index>0&&/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",size:\"sm\",onClick:()=>handleMoveImage(index,index-1),title:\"Mover para cima\",style:{flex:1},children:\"\\u2191\"}),index<imagens.length-1&&/*#__PURE__*/_jsx(Button,{variant:\"outline-secondary\",size:\"sm\",onClick:()=>handleMoveImage(index,index+1),title:\"Mover para baixo\",style:{flex:1},children:\"\\u2193\"}),!imagem.isPrincipal&&/*#__PURE__*/_jsx(Button,{variant:\"outline-primary\",size:\"sm\",onClick:()=>handleMoveToFirst(imagem.id),title:\"Mover para primeira posi\\xE7\\xE3o e definir como principal\",style:{flex:1},children:\"\\u2B06\\uFE0F Topo\"})]})]})]})},imagem.id))})]})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(Button,{variant:\"secondary\",onClick:onHide,disabled:loading||uploadingImages,children:\"Cancelar\"}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",disabled:loading||uploadingImages,children:loading||uploadingImages?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Spinner,{size:\"sm\",className:\"me-2\"}),uploadingImages?'Enviando imagens...':'Salvando...']}):'Salvar Alterações'})]})]})]});};export default ProductEditModal;","map":{"version":3,"names":["React","useState","useEffect","Modal","Form","Button","Alert","Row","Col","Spinner","Card","Badge","Image","api","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductEditModal","_ref","show","onHide","product","onProductUpdated","formData","setFormData","nome","descricao","preco","quantidadeEstoque","avaliacao","status","imagens","setImagens","loading","setLoading","error","setError","uploadingImages","setUploadingImages","newImages","setNewImages","length","handleInputChange","e","name","value","target","prev","_objectSpread","handleImageUpload","files","Array","from","handleMoveImage","fromIndex","toIndex","items","reorderedItem","splice","updatedImages","map","img","index","ordem","handleMoveToFirst","imagemId","mainImage","find","id","otherImages","filter","isPrincipal","handleSetMainImage","handleRemoveImage","window","confirm","delete","concat","some","reorderedImages","err","_err$response","response","data","message","handleSubmit","preventDefault","trim","Error","parseFloat","parseInt","productData","FormData","forEach","file","append","post","headers","put","_err$response2","size","centered","children","Header","closeButton","Title","onSubmit","Body","variant","className","md","Group","Label","Control","type","onChange","required","placeholder","step","as","rows","min","max","Text","Select","multiple","accept","imagem","lg","src","urlArquivo","alt","nomeArquivo","style","width","height","objectFit","bg","fontSize","onClick","padding","title","substring","disabled","flex","Footer"],"sources":["D:/PI4/goia-shop/frontend/src/components/ProductEditCompleteModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Modal, Form, Button, Alert, Row, Col, Spinner, Card, Badge, Image } from 'react-bootstrap';\r\nimport api from '../utils/api';\r\n\r\nconst ProductEditModal = ({ show, onHide, product, onProductUpdated }) => {\r\n    const [formData, setFormData] = useState({\r\n        nome: '',\r\n        descricao: '',\r\n        preco: '',\r\n        quantidadeEstoque: '',\r\n        avaliacao: '',\r\n        status: ''\r\n    });\r\n    const [imagens, setImagens] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const [uploadingImages, setUploadingImages] = useState(false);\r\n    const [newImages, setNewImages] = useState([]);\r\n\r\n    useEffect(() => {\r\n        if (product) {\r\n            setFormData({\r\n                nome: product.nome || '',\r\n                descricao: product.descricao || '',\r\n                preco: product.preco || '',\r\n                quantidadeEstoque: product.quantidadeEstoque || '',\r\n                avaliacao: product.avaliacao || '',\r\n                status: product.status || 'ATIVO'\r\n            });\r\n            \r\n            // Carregar imagens do produto\r\n            if (product.imagens && product.imagens.length > 0) {\r\n                setImagens(product.imagens);\r\n            } else {\r\n                setImagens([]);\r\n            }\r\n        }\r\n    }, [product]);\r\n\r\n    const handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setFormData(prev => ({\r\n            ...prev,\r\n            [name]: value\r\n        }));\r\n        setError('');\r\n    };\r\n\r\n    const handleImageUpload = (e) => {\r\n        const files = Array.from(e.target.files);\r\n        if (files.length > 0) {\r\n            setNewImages(files);\r\n        }\r\n    };\r\n\r\n    const handleMoveImage = (fromIndex, toIndex) => {\r\n        const items = Array.from(imagens);\r\n        const [reorderedItem] = items.splice(fromIndex, 1);\r\n        items.splice(toIndex, 0, reorderedItem);\r\n\r\n        // Atualizar ordem das imagens\r\n        const updatedImages = items.map((img, index) => ({\r\n            ...img,\r\n            ordem: index\r\n        }));\r\n\r\n        setImagens(updatedImages);\r\n    };\r\n\r\n    const handleMoveToFirst = (imagemId) => {\r\n        const mainImage = imagens.find(img => img.id === imagemId);\r\n        if (!mainImage) return;\r\n\r\n        // Mover para primeira posição e definir como principal\r\n        const otherImages = imagens.filter(img => img.id !== imagemId);\r\n        const updatedImages = [\r\n            { ...mainImage, isPrincipal: true, ordem: 0 },\r\n            ...otherImages.map((img, index) => ({\r\n                ...img,\r\n                isPrincipal: false,\r\n                ordem: index + 1\r\n            }))\r\n        ];\r\n        \r\n        setImagens(updatedImages);\r\n    };\r\n\r\n    const handleSetMainImage = (imagemId) => {\r\n        // Encontrar a imagem que será definida como principal\r\n        const mainImage = imagens.find(img => img.id === imagemId);\r\n        if (!mainImage) return;\r\n\r\n        // Reordenar: imagem principal vai para primeira posição\r\n        const otherImages = imagens.filter(img => img.id !== imagemId);\r\n        const updatedImages = [\r\n            { ...mainImage, isPrincipal: true, ordem: 0 },\r\n            ...otherImages.map((img, index) => ({\r\n                ...img,\r\n                isPrincipal: false,\r\n                ordem: index + 1\r\n            }))\r\n        ];\r\n        \r\n        setImagens(updatedImages);\r\n    };\r\n\r\n    const handleRemoveImage = async (imagemId) => {\r\n        if (!window.confirm('Tem certeza que deseja remover esta imagem?')) {\r\n            return;\r\n        }\r\n\r\n        try {\r\n            await api.delete(`/produtos/${product.id}/imagens/${imagemId}`);\r\n            \r\n            // Remover da lista local\r\n            const updatedImages = imagens.filter(img => img.id !== imagemId);\r\n            \r\n            // Se era a imagem principal, definir a primeira como principal e reordenar\r\n            if (updatedImages.length > 0 && !updatedImages.some(img => img.isPrincipal)) {\r\n                const reorderedImages = updatedImages.map((img, index) => ({\r\n                    ...img,\r\n                    isPrincipal: index === 0,\r\n                    ordem: index\r\n                }));\r\n                setImagens(reorderedImages);\r\n            } else {\r\n                // Reordenar as imagens restantes\r\n                const reorderedImages = updatedImages.map((img, index) => ({\r\n                    ...img,\r\n                    ordem: index\r\n                }));\r\n                setImagens(reorderedImages);\r\n            }\r\n        } catch (err) {\r\n            setError('Erro ao remover imagem: ' + (err.response?.data || err.message));\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            // Validações (melhoradas do modal básico)\r\n            if (!formData.nome.trim()) {\r\n                throw new Error('Nome do produto é obrigatório');\r\n            }\r\n            if (!formData.preco || parseFloat(formData.preco) <= 0) {\r\n                throw new Error('Preço deve ser maior que zero');\r\n            }\r\n            if (!formData.quantidadeEstoque || parseInt(formData.quantidadeEstoque) <= 0) {\r\n                throw new Error('Quantidade em estoque deve ser maior que zero. Para zerar o estoque, use a opção de inativar o produto.');\r\n            }\r\n            if (formData.avaliacao && (parseFloat(formData.avaliacao) < 1 || parseFloat(formData.avaliacao) > 5)) {\r\n                throw new Error('Avaliação deve estar entre 1 e 5');\r\n            }\r\n\r\n            // Preparar dados do produto\r\n            const productData = {\r\n                nome: formData.nome.trim(),\r\n                descricao: formData.descricao.trim(),\r\n                preco: parseFloat(formData.preco),\r\n                quantidadeEstoque: parseInt(formData.quantidadeEstoque),\r\n                avaliacao: formData.avaliacao ? parseFloat(formData.avaliacao) : null,\r\n                status: formData.status,\r\n                imagens: imagens.map((img, index) => ({\r\n                    imagemId: img.id,\r\n                    ordem: index,\r\n                    isPrincipal: img.isPrincipal\r\n                }))\r\n            };\r\n\r\n            // Upload de novas imagens primeiro\r\n            if (newImages.length > 0) {\r\n                setUploadingImages(true);\r\n                const formData = new FormData();\r\n                newImages.forEach(file => {\r\n                    formData.append('arquivos', file);\r\n                });\r\n\r\n                await api.post(`/produtos/${product.id}/imagens`, formData, {\r\n                    headers: {\r\n                        'Content-Type': 'multipart/form-data'\r\n                    }\r\n                });\r\n                setUploadingImages(false);\r\n            }\r\n\r\n            // Atualizar produto\r\n            await api.put(`/produtos/${product.id}/completo`, productData);\r\n\r\n            onProductUpdated();\r\n            onHide();\r\n\r\n        } catch (err) {\r\n            setError(err.response?.data || err.message || 'Erro ao atualizar produto');\r\n            setUploadingImages(false);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Modal show={show} onHide={onHide} size=\"xl\" centered>\r\n            <Modal.Header closeButton>\r\n                <Modal.Title>✏️ Editar Produto</Modal.Title>\r\n            </Modal.Header>\r\n            <Form onSubmit={handleSubmit}>\r\n                <Modal.Body>\r\n                    {error && <Alert variant=\"danger\">{error}</Alert>}\r\n                    \r\n                    {/* Informações do que pode ser editado */}\r\n                    <Alert variant=\"info\" className=\"mb-4\">\r\n                        <strong>📝 Neste modal você pode editar:</strong>\r\n                        <ul className=\"mb-0 mt-2\">\r\n                            <li><strong>Dados básicos:</strong> Nome, descrição, preço, quantidade, avaliação e status</li>\r\n                            <li><strong>Imagens:</strong> Adicionar novas, remover existentes, definir principal e reordenar</li>\r\n                        </ul>\r\n                    </Alert>\r\n                    \r\n                    {/* Informações Básicas */}\r\n                    <h5>📋 Dados Básicos</h5>\r\n                    <Row>\r\n                        <Col md={6}>\r\n                            <Form.Group className=\"mb-3\">\r\n                                <Form.Label>Nome do Produto *</Form.Label>\r\n                                <Form.Control\r\n                                    type=\"text\"\r\n                                    name=\"nome\"\r\n                                    value={formData.nome}\r\n                                    onChange={handleInputChange}\r\n                                    required\r\n                                    placeholder=\"Nome do produto\"\r\n                                />\r\n                            </Form.Group>\r\n                        </Col>\r\n                        <Col md={6}>\r\n                            <Form.Group className=\"mb-3\">\r\n                                <Form.Label>Preço *</Form.Label>\r\n                                <Form.Control\r\n                                    type=\"number\"\r\n                                    step=\"0.01\"\r\n                                    name=\"preco\"\r\n                                    value={formData.preco}\r\n                                    onChange={handleInputChange}\r\n                                    required\r\n                                    placeholder=\"0.00\"\r\n                                />\r\n                            </Form.Group>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    <Form.Group className=\"mb-3\">\r\n                        <Form.Label>Descrição</Form.Label>\r\n                        <Form.Control\r\n                            as=\"textarea\"\r\n                            rows={3}\r\n                            name=\"descricao\"\r\n                            value={formData.descricao}\r\n                            onChange={handleInputChange}\r\n                            placeholder=\"Descrição do produto\"\r\n                        />\r\n                    </Form.Group>\r\n\r\n                    <Row>\r\n                        <Col md={4}>\r\n                            <Form.Group className=\"mb-3\">\r\n                                <Form.Label>Quantidade em Estoque *</Form.Label>\r\n                                <Form.Control\r\n                                    type=\"number\"\r\n                                    name=\"quantidadeEstoque\"\r\n                                    value={formData.quantidadeEstoque}\r\n                                    onChange={handleInputChange}\r\n                                    required\r\n                                    min=\"1\"\r\n                                    placeholder=\"1\"\r\n                                />\r\n                            </Form.Group>\r\n                        </Col>\r\n                        <Col md={4}>\r\n                            <Form.Group className=\"mb-3\">\r\n                                <Form.Label>Avaliação</Form.Label>\r\n                                <Form.Control\r\n                                    type=\"number\"\r\n                                    step=\"0.1\"\r\n                                    min=\"1\"\r\n                                    max=\"5\"\r\n                                    name=\"avaliacao\"\r\n                                    value={formData.avaliacao}\r\n                                    onChange={handleInputChange}\r\n                                    placeholder=\"1.0 - 5.0\"\r\n                                />\r\n                                <Form.Text className=\"text-muted\">\r\n                                    Opcional - de 1 a 5\r\n                                </Form.Text>\r\n                            </Form.Group>\r\n                        </Col>\r\n                        <Col md={4}>\r\n                            <Form.Group className=\"mb-3\">\r\n                                <Form.Label>Status</Form.Label>\r\n                                <Form.Select\r\n                                    name=\"status\"\r\n                                    value={formData.status}\r\n                                    onChange={handleInputChange}\r\n                                >\r\n                                    <option value=\"ATIVO\">Ativo</option>\r\n                                    <option value=\"INATIVO\">Inativo</option>\r\n                                </Form.Select>\r\n                            </Form.Group>\r\n                        </Col>\r\n                    </Row>\r\n\r\n                    {/* Gerenciamento de Imagens */}\r\n                    <hr className=\"my-4\" />\r\n                    <h5>🖼️ Gerenciamento de Imagens</h5>\r\n                    \r\n                    {/* Upload de Novas Imagens */}\r\n                    <Form.Group className=\"mb-4\">\r\n                        <Form.Label>📤 Adicionar Novas Imagens</Form.Label>\r\n                        <Form.Control\r\n                            type=\"file\"\r\n                            multiple\r\n                            accept=\"image/jpeg,image/png,image/gif,image/webp\"\r\n                            onChange={handleImageUpload}\r\n                        />\r\n                        <Form.Text className=\"text-muted\">\r\n                            Selecione uma ou mais imagens. Formatos aceitos: JPEG, PNG, GIF, WebP (máx. 5MB cada)\r\n                        </Form.Text>\r\n                    </Form.Group>\r\n\r\n                    {/* Lista de Imagens Existentes */}\r\n                    {imagens.length > 0 && (\r\n                        <div className=\"mb-3\">\r\n                            <h6>📸 Imagens do Produto</h6>\r\n                            <Alert variant=\"info\" className=\"small mb-3\">\r\n                                <strong>💡 Como usar:</strong>\r\n                                <ul className=\"mb-0 mt-1\">\r\n                                    <li>Clique em <strong>\"⭐ Definir como Principal\"</strong> para escolher a imagem de destaque</li>\r\n                                    <li>Use ↑↓ para reordenar as imagens</li>\r\n                                    <li>Clique no ❌ para remover uma imagem</li>\r\n                                </ul>\r\n                            </Alert>\r\n                            <Row className=\"g-3\">\r\n                                {imagens.map((imagem, index) => (\r\n                                    <Col key={imagem.id} md={4} lg={3}>\r\n                                        <Card className=\"h-100\">\r\n                                            <div className=\"position-relative\">\r\n                                                <Image\r\n                                                    src={imagem.urlArquivo}\r\n                                                    alt={imagem.nomeArquivo}\r\n                                                    style={{\r\n                                                        width: '100%',\r\n                                                        height: '200px',\r\n                                                        objectFit: 'cover'\r\n                                                    }}\r\n                                                />\r\n                                                {/* Badge de Principal */}\r\n                                                {imagem.isPrincipal && (\r\n                                                    <Badge\r\n                                                        bg=\"success\"\r\n                                                        className=\"position-absolute top-0 start-0 m-2\"\r\n                                                        style={{ fontSize: '0.8rem' }}\r\n                                                    >\r\n                                                        ⭐ PRINCIPAL\r\n                                                    </Badge>\r\n                                                )}\r\n                                                {/* Botão Remover */}\r\n                                                <Button\r\n                                                    variant=\"danger\"\r\n                                                    size=\"sm\"\r\n                                                    className=\"position-absolute top-0 end-0 m-2\"\r\n                                                    onClick={() => handleRemoveImage(imagem.id)}\r\n                                                    style={{ width: '30px', height: '30px', padding: '0' }}\r\n                                                    title=\"Remover imagem\"\r\n                                                >\r\n                                                    ❌\r\n                                                </Button>\r\n                                            </div>\r\n                                            <Card.Body className=\"p-2\">\r\n                                                <small className=\"text-muted d-block mb-2\" title={imagem.nomeArquivo}>\r\n                                                    {imagem.nomeArquivo.length > 20 ? \r\n                                                        imagem.nomeArquivo.substring(0, 20) + '...' : \r\n                                                        imagem.nomeArquivo\r\n                                                    }\r\n                                                </small>\r\n                                                \r\n                                                {/* Botão Principal - Redesenhado */}\r\n                                                {!imagem.isPrincipal ? (\r\n                                                    <Button\r\n                                                        variant=\"outline-warning\"\r\n                                                        size=\"sm\"\r\n                                                        className=\"w-100 mb-2\"\r\n                                                        onClick={() => handleSetMainImage(imagem.id)}\r\n                                                    >\r\n                                                        ⭐ Definir como Principal\r\n                                                    </Button>\r\n                                                ) : (\r\n                                                    <Button\r\n                                                        variant=\"success\"\r\n                                                        size=\"sm\"\r\n                                                        className=\"w-100 mb-2\"\r\n                                                        disabled\r\n                                                    >\r\n                                                        ✅ Imagem Principal\r\n                                                    </Button>\r\n                                                )}\r\n                                                \r\n                                                {/* Botões de Ordenação */}\r\n                                                <div className=\"d-flex gap-1 justify-content-center\">\r\n                                                    {index > 0 && (\r\n                                                        <Button\r\n                                                            variant=\"outline-secondary\"\r\n                                                            size=\"sm\"\r\n                                                            onClick={() => handleMoveImage(index, index - 1)}\r\n                                                            title=\"Mover para cima\"\r\n                                                            style={{ flex: 1 }}\r\n                                                        >\r\n                                                            ↑\r\n                                                        </Button>\r\n                                                    )}\r\n                                                    {index < imagens.length - 1 && (\r\n                                                        <Button\r\n                                                            variant=\"outline-secondary\"\r\n                                                            size=\"sm\"\r\n                                                            onClick={() => handleMoveImage(index, index + 1)}\r\n                                                            title=\"Mover para baixo\"\r\n                                                            style={{ flex: 1 }}\r\n                                                        >\r\n                                                            ↓\r\n                                                        </Button>\r\n                                                    )}\r\n                                                    {!imagem.isPrincipal && (\r\n                                                        <Button\r\n                                                            variant=\"outline-primary\"\r\n                                                            size=\"sm\"\r\n                                                            onClick={() => handleMoveToFirst(imagem.id)}\r\n                                                            title=\"Mover para primeira posição e definir como principal\"\r\n                                                            style={{ flex: 1 }}\r\n                                                        >\r\n                                                            ⬆️ Topo\r\n                                                        </Button>\r\n                                                    )}\r\n                                                </div>\r\n                                            </Card.Body>\r\n                                        </Card>\r\n                                    </Col>\r\n                                ))}\r\n                            </Row>\r\n                        </div>\r\n                    )}\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                    <Button variant=\"secondary\" onClick={onHide} disabled={loading || uploadingImages}>\r\n                        Cancelar\r\n                    </Button>\r\n                    <Button variant=\"primary\" type=\"submit\" disabled={loading || uploadingImages}>\r\n                        {loading || uploadingImages ? (\r\n                            <>\r\n                                <Spinner size=\"sm\" className=\"me-2\" />\r\n                                {uploadingImages ? 'Enviando imagens...' : 'Salvando...'}\r\n                            </>\r\n                        ) : (\r\n                            'Salvar Alterações'\r\n                        )}\r\n                    </Button>\r\n                </Modal.Footer>\r\n            </Form>\r\n        </Modal>\r\n    );\r\n};\r\n\r\nexport default ProductEditModal;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}